{% extends 'shared/base.html' %}
{% load static %}

{% block css %}
    <link rel="stylesheet" href="{% static 'styles/queries.css' %}" />
    <link rel="stylesheet" href="{% static 'queries.css' %}" />
{% endblock %}

{% block content %}  
    
    <h1 class="title">Queries</h1>
    {% if book.id is not null%}
    <a href="{% url 'queriesapp:book' book.id %}">{{book}}</a>
    {% endif %}
    
    </br>
    <a href="/queries/form?bookid={{ book.id }}">Add Query</a>
    
    {% comment %} <a href="{% url 'queriesapp:agents_list' %}">Agent List</a> {% endcomment %}
    
    <div class="query-container">
      <div>
      <h2>Pending</h2>
        {% for query in all_queries %}
      {% if query.status.id == 1 %}
         <a href="{% url 'queriesapp:query' query.id %}"> {{query.agent.agent_name}}<a>
          </br>
          {{query.agent.email}}
          </br>
          {{query.sent}}-{{query.expiration}}
          </br>
      {% endif %}
      {% endfor %}
      </div>
    
    <div>
    <h2>FollowUp</h2>
    {% for query in all_queries %}
      {% if query.status.id == 2 %} 
      <a href="{% url 'queriesapp:query' query.id %}"> {{query.agent.agent_name}}<a>
          </br>
          {{query.agent.email}}
          </br>
          {{query.sent}}-{{query.expiration}}
          </br>
      {% endif %}
      {% endfor %}
    </div>

      <div>
      <h2>Rejected</h2>
    {% for query in all_queries %}
      {% if query.status.id == 3 %}
          <a href="{% url 'queriesapp:query' query.id %}"> {{query.agent.agent_name}}<a>
          </br>
          {{query.agent.email}}
          </br>
          {{query.sent}}-{{query.expiration}}
          </br>
          {% endif %}
          {% endfor %}
        </div>
      </div>

      {% comment %} <a href="{% url 'queriesapp:agents' %}">Agent List</a> {% endcomment %}
      <a href="/agents?bookid={{ book.id }}">Agent List</a>
    {% endblock %}
  </body>
</html>